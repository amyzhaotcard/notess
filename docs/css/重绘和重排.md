# 重绘和重排

## 回流

布局引擎会根据各种样式计算每个盒子在页面上的大小与位置

## 重绘

当计算好盒模型的位置、大小及其他属性后，浏览器根据每个盒子特性进行绘制

## 重排触发机制

- 添加或删除可见的 DOM 元素
- 元素的位置发生变化
- 元素的尺寸发生变化（包括外边距、内边框、边框大小、高度和宽度等）
- 内容发生变化，比如文本变化或图片被另一个不同尺寸的图片所替代
- 页面一开始渲染的时候（这避免不了）
- 浏览器的窗口尺寸变化（因为回流是根据视口的大小来计算元素的位置和大小的）

## 重绘触发时机

- 触发回流一定会触发重绘
- 颜色的修改
- 文本方向的修改
- 阴影的修改

## 如何减少重绘和重排

- 如果想设定元素的样式，通过改变元素的 class 类名 (尽可能在 DOM 树的最里层)
- 避免设置多项内联样式
- 应用元素的动画，使用 position 属性的 fixed 值或 absolute 值(如前文示例所提)
- 避免使用 table 布局，table 中每个元素的大小以及内容的改动，都会导致整个 table 的重新计算
- 对于那些复杂的动画，对其设置 position: fixed/absolute，尽可能地使元素脱离文档流，从而减少对其他元素的影响
- 使用 css3 硬件加速，可以让 transform、opacity、filters 这些动画不会引起回流重绘
- 避免使用 CSS 的 JavaScript 表达式

## 重排有什么问题？

非常耗费资源，导致网页性能低下

## translate（偏移） 会引发重绘还是重排

重绘
