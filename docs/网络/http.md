# http

## HTTP 和 HTTPS 的区别

- HTTP 明文传输，数据都是未加密的，安全性较差，HTTPS（SSL+HTTP） 数据传输过程是加密的，安全性较好
- 使用 HTTPS 协议需要到 CA（Certificate Authority，数字证书认证机构） 申请证书，一般免费证书较少，因而需要一定费用
- HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换 3 个包，而 HTTPS 除了 TCP 的三个包，还要加上 ssl 握手需要的 9 个包，所以一共是 12 个包
- HTTP 的默认端口是 80，HTTPS 为 443
- HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议，所以，要比较 HTTPS 比 HTTP 要更耗费服务器资源

## HTTPS 的缺点

- HTTPS 协议多次握手，导致页面的加载时间延长近 50%
- HTTPS 连接缓存不如 HTTP 高效，会增加数据开销和功耗
- 申请 SSL 证书需要钱，功能越强大的证书费用越高
- SSL 涉及到的安全算法会消耗 CPU 资源，对服务器资源消耗较大

## HTTPS 请求过程（ssl）

- 首先客户端通过 URL 访问服务器建立 SSL 连接。
- 服务端收到客户端请求后，会将网站支持的证书信息（证书中包含公钥）传送一份给客户端。
- 客户端的服务器开始协商 SSL 连接的安全等级，也就是信息加密的等级。
- 客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。
- 服务器利用自己的私钥解密出会话密钥。
- 服务器利用会话密钥加密与客户端之间的通信。

## http1.0、http1.1、http2.0 的区别

HTTP1.0：

浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个 TCP 连接

HTTP1.1：

- 引入了持久连接，即 TCP 连接默认不关闭，可以被多个请求复用
- 在同一个 TCP 连接里面，客户端可以同时发送多个请求
- 虽然允许复用 TCP 连接，但是同一个 TCP 连接里面，所有的数据通信是按次序进行的，服务器只有处理完一个请求，才会接着处理下一个请求。如果前面的处理特别慢，后面就会- 有许多请求排队等着
- 新增了一些请求方法
- 新增了一些请求头和响应头

HTTP2.0：

- 采用二进制格式而非文本格式
- 完全多路复用，而非有序并阻塞的、只需一个连接即可实现并行
- 使用报头压缩，降低开销
- 服务器推送
